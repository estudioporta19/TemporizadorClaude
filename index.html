<!DOCTYPE html>
<html lang="pt">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Temporizador de ApresentaÃ§Ãµes</title>
Â  Â  <style>
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  background: #000000;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 1400px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .main-layout {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr 1fr 1fr;
Â  Â  Â  Â  Â  Â  gap: 20px;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .column {
Â  Â  Â  Â  Â  Â  background: #1a1a1a;
Â  Â  Â  Â  Â  Â  border: 1px solid #333;
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  padding: 25px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(255,255,255,0.05);
Â  Â  Â  Â  }

Â  Â  Â  Â  .column-title {
Â  Â  Â  Â  Â  Â  font-size: 1.4rem;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #333;
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .column-title::before {
Â  Â  Â  Â  Â  Â  content: '';
Â  Â  Â  Â  Â  Â  width: 4px;
Â  Â  Â  Â  Â  Â  height: 20px;
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  border-radius: 2px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .header {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .header h1 {
Â  Â  Â  Â  Â  Â  font-size: 2.5rem;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .header p {
Â  Â  Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  Â  Â  opacity: 0.9;
Â  Â  Â  Â  }

Â  Â  Â  Â  .main-panel {
Â  Â  Â  Â  Â  Â  background: #1a1a1a;
Â  Â  Â  Â  Â  Â  border: 1px solid #333;
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(255,255,255,0.05);
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .section {
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  Â  Â  padding-bottom: 20px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #eee;
Â  Â  Â  Â  }

Â  Â  Â  Â  .section:last-child {
Â  Â  Â  Â  Â  Â  border-bottom: none;
Â  Â  Â  Â  Â  Â  margin-bottom: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .section-title {
Â  Â  Â  Â  Â  Â  font-size: 1.3rem;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .section-title::before {
Â  Â  Â  Â  Â  Â  content: '';
Â  Â  Â  Â  Â  Â  width: 4px;
Â  Â  Â  Â  Â  Â  height: 20px;
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  border-radius: 2px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .form-group {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  .form-group label {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  min-width: 120px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .form-group input, .form-group select {
Â  Â  Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  Â  Â  border: 2px solid #e2e8f0;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  transition: border-color 0.3s;
Â  Â  Â  Â  Â  Â  background-color: #333; /* Darker background for inputs */
Â  Â  Â  Â  Â  Â  color: #fff; /* White text for inputs */
Â  Â  Â  Â  }

Â  Â  Â  Â  .form-group input:focus, .form-group select:focus {
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  border-color: #667eea;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  transition: all 0.3s;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  Â  Â  letter-spacing: 0.5px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn:disabled {
Â  Â  Â  Â  Â  Â  opacity: 0.5;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary {
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #5a6fd8;
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-secondary {
Â  Â  Â  Â  Â  Â  background: #718096;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-secondary:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #4a5568;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-success {
Â  Â  Â  Â  Â  Â  background: #48bb78;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-success:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #38a169;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-warning {
Â  Â  Â  Â  Â  Â  background: #ed8936;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-warning:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #dd6b20;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-danger {
Â  Â  Â  Â  Â  Â  background: #f56565;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-danger:hover:not(:disabled) {
Â  Â  Â  Â  Â  Â  background: #e53e3e;
Â  Â  Â  Â  }

Â  Â  Â  Â  .participants-list {
Â  Â  Â  Â  Â  Â  background: #2d2d2d;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .participant-item {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  background: #3a3a3a;
Â  Â  Â  Â  Â  Â  border-radius: 6px;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
Â  Â  Â  Â  }

Â  Â  Â  Â  .participant-item:last-child {
Â  Â  Â  Â  Â  Â  margin-bottom: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  .participant-info {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 10px; /* Reduced gap */
Â  Â  Â  Â  }

Â  Â  Â  Â  .participant-color-indicator {
Â  Â  Â  Â  Â  Â  width: 16px;
Â  Â  Â  Â  Â  Â  height: 16px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  border: 1px solid rgba(255,255,255,0.3);
Â  Â  Â  Â  Â  Â  flex-shrink: 0; /* Prevents shrinking */
Â  Â  Â  Â  }

Â  Â  Â  Â  .participant-name {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  }

Â  Â  Â  Â  .participant-time {
Â  Â  Â  Â  Â  Â  color: #cccccc;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .controls {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .current-session {
Â  Â  Â  Â  Â  Â  background: #2d2d2d;
Â  Â  Â  Â  Â  Â  border: 2px solid #48bb78;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .current-speaker {
Â  Â  Â  Â  Â  Â  font-size: 1.5rem;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .current-time {
Â  Â  Â  Â  Â  Â  font-size: 3rem;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  margin: 15px 0;
Â  Â  Â  Â  Â  Â  font-family: 'Courier New', monospace;
Â  Â  Â  Â  }

Â  Â  Â  Â  .time-green { color: #48bb78; }
Â  Â  Â  Â  .time-yellow { color: #ed8936; }
Â  Â  Â  Â  .time-red { color: #f56565; }
Â  Â  Â  Â  .time-negative { color: #f56565; } /* New style for negative time */

Â  Â  Â  Â  .mode-selector {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .mode-btn {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  border: 2px solid #444;
Â  Â  Â  Â  Â  Â  background: #2d2d2d;
Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  transition: all 0.3s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .mode-btn.active {
Â  Â  Â  Â  Â  Â  border-color: #667eea;
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .mode-btn:hover {
Â  Â  Â  Â  Â  Â  border-color: #667eea;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-indicator {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  width: 12px;
Â  Â  Â  Â  Â  Â  height: 12px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  margin-right: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .status-ready { background: #48bb78; }
Â  Â  Â  Â  .status-active { background: #ed8936; }
Â  Â  Â  Â  .status-finished { background: #f56565; }

Â  Â  Â  Â  .display-window-btn {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  bottom: 20px;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  width: 60px;
Â  Â  Â  Â  Â  Â  height: 60px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 24px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
Â  Â  Â  Â  Â  Â  transition: all 0.3s;
Â  Â  Â  Â  }

Â  Â  Â  Â  .display-window-btn:hover {
Â  Â  Â  Â  Â  Â  transform: scale(1.1);
Â  Â  Â  Â  Â  Â  background: #5a6fd8;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Styles for small delete button */
Â  Â  Â  Â  .btn-delete-small {
Â  Â  Â  Â  Â  Â  padding: 5px 8px; /* Reduced padding */
Â  Â  Â  Â  Â  Â  font-size: 12px; /* Smaller font size */
Â  Â  Â  Â  Â  Â  line-height: 1;
Â  Â  Â  Â  Â  Â  width: 30px; /* Fixed width */
Â  Â  Â  Â  Â  Â  height: 30px; /* Fixed height */
Â  Â  Â  Â  Â  Â  border-radius: 50%; /* Make it round */
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Input de mensagem */
Â  Â  Â  Â  .message-input-group {
Â  Â  Â  Â  Â  Â  margin-top: 25px;
Â  Â  Â  Â  Â  Â  padding-top: 20px;
Â  Â  Â  Â  Â  Â  border-top: 1px solid #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  .message-input {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border: 2px solid #667eea;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  background-color: #2d2d2d;
Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  font-size: 1rem;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .message-input::placeholder {
Â  Â  Â  Â  Â  Â  color: #aaa;
Â  Â  Â  Â  Â  Â  opacity: 0.8;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Styles for session controls */
Â  Â  Â  Â  .session-control-group {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }
Â  Â  Â  Â  .session-control-group .btn {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  min-width: 100px;
Â  Â  Â  Â  }


Â  Â  Â  Â  @media (max-width: 1200px) {
Â  Â  Â  Â  Â  Â  .main-layout {
Â  Â  Â  Â  Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .form-group {
Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  .form-group label {
Â  Â  Â  Â  Â  Â  Â  Â  min-width: auto;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  .controls {
Â  Â  Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  Â  Â  padding: 8px 16px;
Â  Â  Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <div class="header">
Â  Â  Â  Â  Â  Â  <h1>ğŸ¯ Temporizador de ApresentaÃ§Ãµes</h1>
Â  Â  Â  Â  Â  Â  <p>Sistema profissional de gestÃ£o de tempo para apresentaÃ§Ãµes e debates</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="main-layout">
Â  Â  Â  Â  Â  Â  <div class="column">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="column-title">âš™ï¸ ConfiguraÃ§Ã£o de SessÃ£o</h2>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>SessÃ£o Atual:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="sessionSelector" style="width: 100%;" onchange="loadSelectedSession()"></select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="session-control-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="saveCurrentSession()">ğŸ’¾ Gravar SessÃ£o</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-danger" onclick="deleteSelectedSession()">ğŸ—‘ï¸ Apagar SessÃ£o</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <hr style="border: 1px solid #333; margin: 25px 0;">

Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color: #ffffff; margin-bottom: 15px; font-size: 1.1rem;">â• Adicionar Participante</h3>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Nome do Participante:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="participantName" placeholder="Deixe vazio para auto-gerar" style="width: 100%;">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Tempo:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 10px; align-items: center; width: 100%;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="participantMinutes" placeholder="Min" min="0" max="59" value="0" style="flex: 1;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span style="color: #fff;">:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="participantSeconds" placeholder="Seg" min="0" max="59" value="0" style="flex: 1;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group" style="flex-wrap: wrap; gap: 8px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="addTime(1, 0)" style="flex: 1; min-width: 80px;">+1min</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="addTime(5, 0)" style="flex: 1; min-width: 80px;">+5min</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="addTime(10, 0)" style="flex: 1; min-width: 80px;">+10min</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="addTime(30, 0)" style="flex: 1; min-width: 80px;">+30min</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-danger" onclick="clearTime()" style="width: 100%; margin-top: 5px;">Limpar</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="addParticipant()" style="width: 100%; margin-top: 10px;">Adicionar Participante</button>

Â  Â  Â  Â  Â  Â  Â  Â  <hr style="border: 1px solid #333; margin: 25px 0;">

Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color: #ffffff; margin-bottom: 15px; font-size: 1.1rem;">ğŸš¨ ConfiguraÃ§Ãµes de Alerta</h3>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Alerta Amarelo (segundos restantes):</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="yellowAlert" value="60" min="0" style="width: 100%;">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Alerta Vermelho (segundos restantes):</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="redAlert" value="30" min="0" style="width: 100%;">
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Tipo de Alerta:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="alertType" style="width: 100%;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="text">Apenas Texto</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="background">Fundo</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="both">Texto + Fundo</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="column">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="column-title">ğŸ® Modo de OperaÃ§Ã£o</h2>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="mode-selector">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mode-btn active" onclick="setMode('individual')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Individual</strong><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <small>Um orador</small>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mode-btn" onclick="setMode('debate')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Debate</strong><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <small>Todos visÃ­veis</small>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color: #ffffff; margin: 20px 0 15px 0; font-size: 1.1rem;">ğŸ‘¥ Participantes</h3>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="participants-list" id="participantsList">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="text-align: center; color: #718096;">Nenhum participante adicionado</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-danger" onclick="clearAllParticipants()" style="width: 100%; margin-top: 20px;">Limpar Lista de Participantes</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="column">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="column-title">ğŸ›ï¸ Controlo da SessÃ£o</h2>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="current-session" id="sessionDisplay">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="current-speaker" id="currentSpeaker">Selecione um participante</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="current-time" id="currentTime">00:00</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="sessionStatus">SessÃ£o nÃ£o iniciada</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-success" onclick="startTimer()" id="startBtn" disabled>â–¶ï¸ Iniciar</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-warning" onclick="pauseTimer()" id="pauseBtn" disabled>â¸ï¸ Pausar</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-danger" onclick="resetTimer()" id="resetBtn" disabled>â¹ï¸ Reset</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="previousParticipant()" id="previousBtn" disabled>â®ï¸ Anterior</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="nextParticipant()" id="nextBtn" disabled>â­ï¸ PrÃ³ximo</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group" style="justify-content: center; margin-top: 20px; flex-wrap: wrap;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label style="width: 100%; text-align: center; margin-bottom: 10px;">Ajustar Tempo:</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="adjustTime(-30)" id="adjustMinus30Btn" disabled>-30s</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="adjustTime(-10)" id="adjustMinus10Btn" disabled>-10s</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="adjustTime(10)" id="adjustPlus10Btn" disabled>+10s</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="adjustTime(30)" id="adjustPlus30Btn" disabled>+30s</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div class="message-input-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color: #ffffff; margin-bottom: 10px; font-size: 1.1rem; text-align: center;">ğŸ’¬ Enviar Mensagem para o EcrÃ£</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="displayMessageInput" class="message-input" placeholder="Carregue Enter para enviar mensagem">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <button class="display-window-btn" onclick="openDisplayWindow()" title="Abrir EcrÃ£ de ApresentaÃ§Ã£o">
Â  Â  Â  Â  ğŸ“º
Â  Â  </button>

Â  Â  <script>
Â  Â  Â  Â  // Estado da aplicaÃ§Ã£o
Â  Â  Â  Â  let participants = [];
Â  Â  Â  Â  let currentParticipantIndex = 0;
Â  Â  Â  Â  let currentMode = 'individual';
Â  Â  Â  Â  let isRunning = false;
Â  Â  Â  Â  let isPaused = false;
Â  Â  Â  Â  let currentTime = 0; // Pode ser negativo agora
Â  Â  Â  Â  let timerInterval = null;
Â  Â  Â  Â  let displayWindow = null;
Â  Â  Â  Â  let currentMessage = ""; // Para armazenar a mensagem para o display

Â  Â  Â  Â  // SessÃµes
Â  Â  Â  Â  let sessions = {}; // Armazena todas as sessÃµes guardadas
Â  Â  Â  Â  let currentSessionName = 'Nova SessÃ£o'; // Nome da sessÃ£o atualmente ativa/carregada

Â  Â  Â  Â  // Paleta de cores para participantes - cores vibrantes e distintas
Â  Â  Â  Â  const participantColors = [
Â  Â  Â  Â  Â  Â  '#667eea', // Amethyst (Azul/Roxo)
Â  Â  Â  Â  Â  Â  '#48bb78', // Emerald (Verde)
Â  Â  Â  Â  Â  Â  '#ed8936', // Orange (Laranja)
Â  Â  Â  Â  Â  Â  '#f56565', // Red (Vermelho)
Â  Â  Â  Â  Â  Â  '#4299e1', // Blue (Azul)
Â  Â  Â  Â  Â  Â  '#ecc94b', // Yellow (Amarelo)
Â  Â  Â  Â  Â  Â  '#9f7aea', // Purple (Roxo)
Â  Â  Â  Â  Â  Â  '#a0aec0', // Gray (Cinza)
Â  Â  Â  Â  Â  Â  '#e53e3e', // Rose (Vermelho Escuro)
Â  Â  Â  Â  Â  Â  '#38b2ac', // Teal (Verde Azulado)
Â  Â  Â  Â  Â  Â  '#d69e2e', // Gold (Dourado)
Â  Â  Â  Â  Â  Â  '#b794f4'Â  // Lavender (LilÃ¡s)
Â  Â  Â  Â  ];
Â  Â  Â  Â  let colorIndex = 0; // Para ciclar as cores

Â  Â  Â  Â  // ConfiguraÃ§Ãµes de alerta
Â  Â  Â  Â  let alertSettings = {
Â  Â  Â  Â  Â  Â  yellow: 60,
Â  Â  Â  Â  Â  Â  red: 30,
Â  Â  Â  Â  Â  Â  type: 'text'
Â  Â  Â  Â  };

Â  Â  Â  Â  // --- FunÃ§Ãµes de GestÃ£o de SessÃµes ---

Â  Â  Â  Â  // Carrega todas as sessÃµes do Local Storage
Â  Â  Â  Â  function loadSessions() {
Â  Â  Â  Â  Â  Â  const savedSessions = localStorage.getItem('presentationTimerSessions');
Â  Â  Â  Â  Â  Â  if (savedSessions) {
Â  Â  Â  Â  Â  Â  Â  Â  sessions = JSON.parse(savedSessions);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  sessions = {};
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateSessionSelector();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Guarda todas as sessÃµes no Local Storage
Â  Â  Â  Â  function saveSessions() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('presentationTimerSessions', JSON.stringify(sessions));
Â  Â  Â  Â  Â  Â  updateSessionSelector(); // Atualiza o seletor apÃ³s salvar
Â  Â  Â  Â  }

Â  Â  Â  Â  // Atualiza o dropdown do seletor de sessÃµes
Â  Â  Â  Â  function updateSessionSelector() {
Â  Â  Â  Â  Â  Â  const selector = document.getElementById('sessionSelector');
Â  Â  Â  Â  Â  Â  selector.innerHTML = ''; // Limpa as opÃ§Ãµes existentes

Â  Â  Â  Â  Â  Â  // Adiciona a opÃ§Ã£o "Nova SessÃ£o" sempre no topo
Â  Â  Â  Â  Â  Â  const newSessionOption = document.createElement('option');
Â  Â  Â  Â  Â  Â  newSessionOption.value = 'Nova SessÃ£o';
Â  Â  Â  Â  Â  Â  newSessionOption.textContent = 'Nova SessÃ£o';
Â  Â  Â  Â  Â  Â  selector.appendChild(newSessionOption);

Â  Â  Â  Â  Â  Â  // Adiciona as sessÃµes guardadas, ordenadas numericamente
Â  Â  Â  Â  Â  Â  const sortedSessionNames = Object.keys(sessions).sort((a, b) => {
Â  Â  Â  Â  Â  Â  Â  Â  const numA = parseInt(a.replace('SessÃ£o ', '')) || 0;
Â  Â  Â  Â  Â  Â  Â  Â  const numB = parseInt(b.replace('SessÃ£o ', '')) || 0;
Â  Â  Â  Â  Â  Â  Â  Â  return numA - numB;
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  sortedSessionNames.forEach(name => {
Â  Â  Â  Â  Â  Â  Â  Â  const option = document.createElement('option');
Â  Â  Â  Â  Â  Â  Â  Â  option.value = name;
Â  Â  Â  Â  Â  Â  Â  Â  option.textContent = name;
Â  Â  Â  Â  Â  Â  Â  Â  selector.appendChild(option);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Seleciona a sessÃ£o atualmente carregada ou "Nova SessÃ£o"
Â  Â  Â  Â  Â  Â  selector.value = currentSessionName;
Â  Â  Â  Â  Â  Â  if (selector.value !== currentSessionName) {
Â  Â  Â  Â  Â  Â  Â  Â  selector.value = 'Nova SessÃ£o'; // Se a sessÃ£o atual nÃ£o existe mais, seleciona nova sessÃ£o
Â  Â  Â  Â  Â  Â  Â  Â  currentSessionName = 'Nova SessÃ£o';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Gera o prÃ³ximo nome sequencial para uma nova sessÃ£o
Â  Â  Â  Â  function getNextSessionName() {
Â  Â  Â  Â  Â  Â  let nextNumber = 1;
Â  Â  Â  Â  Â  Â  const existingNumbers = Object.keys(sessions)
Â  Â  Â  Â  Â  Â  Â  Â  .filter(name => name.startsWith('SessÃ£o '))
Â  Â  Â  Â  Â  Â  Â  Â  .map(name => parseInt(name.replace('SessÃ£o ', '')))
Â  Â  Â  Â  Â  Â  Â  Â  .filter(num => !isNaN(num))
Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => a - b);

Â  Â  Â  Â  Â  Â  for (let i = 0; i < existingNumbers.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  if (existingNumbers[i] === nextNumber) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextNumber++;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return `SessÃ£o ${nextNumber}`;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Grava a sessÃ£o atual
Â  Â  Â  Â  function saveCurrentSession() {
Â  Â  Â  Â  Â  Â  pauseTimer(); // Pausa o timer antes de salvar

Â  Â  Â  Â  Â  Â  // Se a sessÃ£o atual Ã© "Nova SessÃ£o" e nÃ£o estÃ¡ vazia, gera um novo nome
Â  Â  Â  Â  Â  Â  if (currentSessionName === 'Nova SessÃ£o' && participants.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  currentSessionName = getNextSessionName();
Â  Â  Â  Â  Â  Â  } else if (currentSessionName === 'Nova SessÃ£o' && participants.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('NÃ£o hÃ¡ participantes para salvar nesta nova sessÃ£o.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  sessions[currentSessionName] = {
Â  Â  Â  Â  Â  Â  Â  Â  participants: participants.map(p => ({ ...p, status: 'ready' })), // Salva todos como 'ready'
Â  Â  Â  Â  Â  Â  Â  Â  alertSettings: { ...alertSettings }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  saveSessions();
Â  Â  Â  Â  Â  Â  alert(`SessÃ£o "${currentSessionName}" salva com sucesso!`);
Â  Â  Â  Â  Â  Â  document.getElementById('sessionSelector').value = currentSessionName; // Garante que a sessÃ£o salva estÃ¡ selecionada
Â  Â  Â  Â  }

Â  Â  Â  Â  // Carrega a sessÃ£o selecionada no dropdown
Â  Â  Â  Â  function loadSelectedSession() {
Â  Â  Â  Â  Â  Â  const selectedName = document.getElementById('sessionSelector').value;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (selectedName === 'Nova SessÃ£o') {
Â  Â  Â  Â  Â  Â  Â  Â  if (confirm('Deseja iniciar uma nova sessÃ£o? Os participantes atuais serÃ£o perdidos.')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearAllParticipants(false); // Limpa participantes sem confirmaÃ§Ã£o de limpeza geral
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentSessionName = 'Nova SessÃ£o';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertSettings = { yellow: 60, red: 30, type: 'text' }; // Reseta configs de alerta
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateAlertSettingsDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('sessionSelector').value = currentSessionName; // Volta para a sessÃ£o anterior
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (sessions[selectedName]) {
Â  Â  Â  Â  Â  Â  Â  Â  if (confirm(`Deseja carregar a sessÃ£o "${selectedName}"? A sessÃ£o atual serÃ¡ perdida.`)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pauseTimer(); // Pausa qualquer timer em execuÃ§Ã£o
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentSessionName = selectedName;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const loadedSession = sessions[selectedName];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  participants = loadedSession.participants.map(p => ({ ...p })); // Clona para nÃ£o modificar a versÃ£o salva
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Resetar o estado dos participantes ao carregar (todos como "ready", tempo restante para o tempo inicial)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  participants.forEach(p => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  p.remainingTime = p.timeSeconds;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  p.status = 'ready';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Carrega configuraÃ§Ãµes de alerta
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertSettings = { ...loadedSession.alertSettings };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateAlertSettingsDisplay(); // Atualiza os campos de input de alerta

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentParticipantIndex = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (participants.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTime = participants[0].remainingTime;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTime = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`SessÃ£o "${selectedName}" carregada com sucesso!`);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('sessionSelector').value = currentSessionName; // Volta para a sessÃ£o anterior
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Apaga a sessÃ£o selecionada no dropdown
Â  Â  Â  Â  function deleteSelectedSession() {
Â  Â  Â  Â  Â  Â  const selectedName = document.getElementById('sessionSelector').value;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (selectedName === 'Nova SessÃ£o') {
Â  Â  Â  Â  Â  Â  Â  Â  alert('NÃ£o Ã© possÃ­vel apagar a sessÃ£o "Nova SessÃ£o".');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (confirm(`Tem certeza que deseja apagar a sessÃ£o "${selectedName}"? Esta aÃ§Ã£o nÃ£o pode ser desfeita.`)) {
Â  Â  Â  Â  Â  Â  Â  Â  pauseTimer(); // Pausa o timer
Â  Â  Â  Â  Â  Â  Â  Â  delete sessions[selectedName];
Â  Â  Â  Â  Â  Â  Â  Â  saveSessions();
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Se a sessÃ£o apagada era a atualmente carregada, volte para "Nova SessÃ£o"
Â  Â  Â  Â  Â  Â  Â  Â  if (currentSessionName === selectedName) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentSessionName = 'Nova SessÃ£o';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  clearAllParticipants(false); // Limpa os participantes da tela atual
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alertSettings = { yellow: 60, red: 30, type: 'text' }; // Reseta configs de alerta
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateAlertSettingsDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  updateSessionSelector(); // Atualiza o dropdown
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  Â  Â  alert(`SessÃ£o "${selectedName}" apagada com sucesso.`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Atualiza os campos de input de alerta com as configuraÃ§Ãµes atuais
Â  Â  Â  Â  function updateAlertSettingsDisplay() {
Â  Â  Â  Â  Â  Â  document.getElementById('yellowAlert').value = alertSettings.yellow;
Â  Â  Â  Â  Â  Â  document.getElementById('redAlert').value = alertSettings.red;
Â  Â  Â  Â  Â  Â  document.getElementById('alertType').value = alertSettings.type;
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- FunÃ§Ãµes Existentes (Com Pequenas ModificaÃ§Ãµes) ---

Â  Â  Â  Â  // Adicionar tempo aos campos
Â  Â  Â  Â  function addTime(minutes, seconds) {
Â  Â  Â  Â  Â  Â  const minField = document.getElementById('participantMinutes');
Â  Â  Â  Â  Â  Â  const secField = document.getElementById('participantSeconds');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let currentMin = parseInt(minField.value) || 0;
Â  Â  Â  Â  Â  Â  let currentSec = parseInt(secField.value) || 0;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  currentMin += minutes;
Â  Â  Â  Â  Â  Â  currentSec += seconds;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (currentSec >= 60) {
Â  Â  Â  Â  Â  Â  Â  Â  currentMin += Math.floor(currentSec / 60);
Â  Â  Â  Â  Â  Â  Â  Â  currentSec = currentSec % 60;
Â  Â  Â  Â  Â  Â  } else if (currentSec < 0) {
Â  Â  Â  Â  Â  Â  Â  Â  currentMin += Math.ceil(currentSec / 60); 
Â  Â  Â  Â  Â  Â  Â  Â  currentSec = currentSec % 60 + 60; 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  minField.value = Math.max(0, currentMin);
Â  Â  Â  Â  Â  Â  secField.value = Math.max(0, currentSec);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Limpar campos de tempo
Â  Â  Â  Â  function clearTime() {
Â  Â  Â  Â  Â  Â  document.getElementById('participantMinutes').value = '0';
Â  Â  Â  Â  Â  Â  document.getElementById('participantSeconds').value = '0';
Â  Â  Â  Â  }

Â  Â  Â  Â  // Adicionar participante (Atualizado para numeraÃ§Ã£o sequencial sem lacunas e cores)
Â  Â  Â  Â  function addParticipant() {
Â  Â  Â  Â  Â  Â  let name = document.getElementById('participantName').value.trim();
Â  Â  Â  Â  Â  Â  const minutes = parseInt(document.getElementById('participantMinutes').value) || 0;
Â  Â  Â  Â  Â  Â  const seconds = parseInt(document.getElementById('participantSeconds').value) || 0;

Â  Â  Â  Â  Â  Â  if (minutes === 0 && seconds === 0 && !name) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Por favor, defina um tempo para o participante, ou insira um nome para auto-gerar o tempo padrÃ£o (00:00).');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (minutes < 0 || seconds < 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Os minutos e segundos nÃ£o podem ser negativos.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  let nextParticipantNumber = 1;
Â  Â  Â  Â  Â  Â  const existingNumbers = participants
Â  Â  Â  Â  Â  Â  Â  Â  .filter(p => p.name.startsWith('Participante '))
Â  Â  Â  Â  Â  Â  Â  Â  .map(p => parseInt(p.name.replace('Participante ', '')))
Â  Â  Â  Â  Â  Â  Â  Â  .filter(num => !isNaN(num))
Â  Â  Â  Â  Â  Â  Â  Â  .sort((a, b) => a - b);

Â  Â  Â  Â  Â  Â  for (let i = 0; i < existingNumbers.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  if (existingNumbers[i] === nextParticipantNumber) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextParticipantNumber++;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (!name) {
Â  Â  Â  Â  Â  Â  Â  Â  name = `Participante ${nextParticipantNumber}`;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const totalSeconds = (minutes * 60) + seconds;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const assignedColor = participantColors[colorIndex % participantColors.length];
Â  Â  Â  Â  Â  Â  colorIndex++; 

Â  Â  Â  Â  Â  Â  const participant = {
Â  Â  Â  Â  Â  Â  Â  Â  id: Date.now(),
Â  Â  Â  Â  Â  Â  Â  Â  name: name,
Â  Â  Â  Â  Â  Â  Â  Â  timeMinutes: minutes,
Â  Â  Â  Â  Â  Â  Â  Â  timeSeconds: totalSeconds,
Â  Â  Â  Â  Â  Â  Â  Â  remainingTime: totalSeconds,
Â  Â  Â  Â  Â  Â  Â  Â  status: 'ready',
Â  Â  Â  Â  Â  Â  Â  Â  color: assignedColor 
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  participants.push(participant);
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('participantName').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('participantMinutes').value = '0';
Â  Â  Â  Â  Â  Â  document.getElementById('participantSeconds').value = '0';

Â  Â  Â  Â  Â  Â  updateControlButtons(); 
Â  Â  Â  Â  Â  Â  updateDisplayWindow(); 
Â  Â  Â  Â  }

Â  Â  Â  Â  // Atualizar lista de participantes (com botÃ£o "Iniciar" e Ã­cone de remover)
Â  Â  Â  Â  function updateParticipantsList() {
Â  Â  Â  Â  Â  Â  const list = document.getElementById('participantsList');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (participants.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  list.innerHTML = '<p style="text-align: center; color: #718096;">Nenhum participante adicionado</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  list.innerHTML = participants.map((participant, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  const displayMinutes = Math.floor(Math.abs(participant.remainingTime) / 60);
Â  Â  Â  Â  Â  Â  Â  Â  const displaySeconds = Math.abs(participant.remainingTime) % 60;
Â  Â  Â  Â  Â  Â  Â  Â  const sign = participant.remainingTime < 0 ? '-' : '';

Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="participant-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="participant-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="status-indicator ${participant.status === 'ready' ? 'status-ready' : participant.status === 'active' ? 'status-active' : 'status-finished'}"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="participant-color-indicator" style="background-color: ${participant.color};"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="participant-name">${participant.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="participant-time">${sign}${String(displayMinutes).padStart(2, '0')}:${String(displaySeconds).padStart(2, '0')}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="display: flex; gap: 5px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-success btn-delete-small" onclick="selectParticipant(${index})" title="Selecionar para Apresentar">â–¶ï¸</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-danger btn-delete-small" onclick="removeParticipant(${participant.id})" title="Remover Participante">âœ–ï¸</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  // Remover participante
Â  Â  Â  Â  function removeParticipant(id) {
Â  Â  Â  Â  Â  Â  if (confirm('Tem certeza que deseja remover este participante?')) {
Â  Â  Â  Â  Â  Â  Â  Â  const initialLength = participants.length;
Â  Â  Â  Â  Â  Â  Â  Â  participants = participants.filter(p => p.id !== id);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (participants.length < initialLength) { // Se um participante foi realmente removido
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Ajusta o currentParticipantIndex se o removido for anterior ao atual
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentParticipantIndex >= participants.length && participants.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentParticipantIndex = participants.length - 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (participants.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentParticipantIndex = 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pauseTimer();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Limpar todos os participantes
Â  Â  Â  Â  function clearAllParticipants(showConfirm = true) {
Â  Â  Â  Â  Â  Â  if (showConfirm && !confirm('Tem certeza que deseja limpar todos os participantes? Esta aÃ§Ã£o nÃ£o pode ser desfeita.')) {
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  pauseTimer();
Â  Â  Â  Â  Â  Â  participants = [];
Â  Â  Â  Â  Â  Â  currentParticipantIndex = 0;
Â  Â  Â  Â  Â  Â  currentTime = 0;
Â  Â  Â  Â  Â  Â  colorIndex = 0; // Resetar o Ã­ndice de cores
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Selecionar participante
Â  Â  Â  Â  function selectParticipant(index) {
Â  Â  Â  Â  Â  Â  if (index >= 0 && index < participants.length) {
Â  Â  Â  Â  Â  Â  Â  Â  pauseTimer();
Â  Â  Â  Â  Â  Â  Â  Â  if (participants[currentParticipantIndex] && participants[currentParticipantIndex].status === 'active') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'finished'; // Marca o anterior como terminado se estava ativo
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  currentParticipantIndex = index;
Â  Â  Â  Â  Â  Â  Â  Â  const selectedP = participants[currentParticipantIndex];
Â  Â  Â  Â  Â  Â  Â  Â  selectedP.status = 'active';
Â  Â  Â  Â  Â  Â  Â  Â  currentTime = selectedP.remainingTime; // Reseta para o remainingTime do participante
Â  Â  Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  Â  Â  startTimer(); // Inicia o timer automaticamente
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Iniciar o timer
Â  Â  Â  Â  function startTimer() {
Â  Â  Â  Â  Â  Â  if (isRunning) return;
Â  Â  Â  Â  Â  Â  if (participants.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Por favor, adicione participantes antes de iniciar o timer.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (participants[currentParticipantIndex].status === 'finished') {
Â  Â  Â  Â  Â  Â  Â  Â  if (!confirm('Este participante jÃ¡ terminou. Deseja reiniciar o tempo para ele?')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].remainingTime = participants[currentParticipantIndex].timeSeconds;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentTime = participants[currentParticipantIndex].remainingTime;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  isRunning = true;
Â  Â  Â  Â  Â  Â  isPaused = false;
Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'active';
Â  Â  Â  Â  Â  Â  updateParticipantsList(); // Atualiza o status visual
Â  Â  Â  Â  Â  Â  updateControlButtons();

Â  Â  Â  Â  Â  Â  timerInterval = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â  Â  currentTime--;
Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].remainingTime = currentTime; // Salva o tempo restante no objeto
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();

Â  Â  Â  Â  Â  Â  Â  Â  if (currentTime <= alertSettings.yellow && currentTime > alertSettings.red) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Amarelo
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.remove('time-green', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.add('time-yellow');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (displayWindow) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.className = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'background' || alertSettings.type === 'both') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.classList.add('background-yellow');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'text' || alertSettings.type === 'both') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.remove('time-green', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.add('time-yellow');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTime <= alertSettings.red && currentTime >= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Vermelho
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.remove('time-green', 'time-yellow', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.add('time-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (displayWindow) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.className = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'background' || alertSettings.type === 'both') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.classList.add('background-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'text' || alertSettings.type === 'both') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.remove('time-green', 'time-yellow', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.add('time-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTime < 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Tempo Negativo - Vermelho
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.remove('time-green', 'time-yellow', 'time-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.add('time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (displayWindow) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.className = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'background' || alertSettings.type === 'both') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.classList.add('background-red'); // MantÃ©m o fundo vermelho para tempo negativo
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'text' || alertSettings.type === 'both') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.remove('time-green', 'time-yellow', 'time-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.add('time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Verde
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.remove('time-yellow', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('currentTime').classList.add('time-green');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (displayWindow) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.body.className = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.remove('time-yellow', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.document.getElementById('displayTime').classList.add('time-green');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }, 1000);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Pausar o timer
Â  Â  Â  Â  function pauseTimer() {
Â  Â  Â  Â  Â  Â  clearInterval(timerInterval);
Â  Â  Â  Â  Â  Â  isRunning = false;
Â  Â  Â  Â  Â  Â  isPaused = true;
Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'ready'; // Marca como pronto ao pausar
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Resetar o timer
Â  Â  Â  Â  function resetTimer() {
Â  Â  Â  Â  Â  Â  pauseTimer();
Â  Â  Â  Â  Â  Â  if (participants.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].remainingTime = participants[currentParticipantIndex].timeSeconds;
Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'ready';
Â  Â  Â  Â  Â  Â  Â  Â  currentTime = participants[currentParticipantIndex].remainingTime;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  currentTime = 0;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  }

Â  Â  Â  Â  // PrÃ³ximo participante
Â  Â  Â  Â  function nextParticipant() {
Â  Â  Â  Â  Â  Â  pauseTimer();
Â  Â  Â  Â  Â  Â  if (participants.length === 0) return;

Â  Â  Â  Â  Â  Â  if (participants[currentParticipantIndex] && participants[currentParticipantIndex].status === 'active') {
Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'finished'; // Marca o anterior como terminado
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  currentParticipantIndex = (currentParticipantIndex + 1) % participants.length;
Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'active'; // Marca o prÃ³ximo como ativo
Â  Â  Â  Â  Â  Â  currentTime = participants[currentParticipantIndex].remainingTime;
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  startTimer(); // Inicia o timer automaticamente para o prÃ³ximo
Â  Â  Â  Â  }

Â  Â  Â  Â  // Participante anterior
Â  Â  Â  Â  function previousParticipant() {
Â  Â  Â  Â  Â  Â  pauseTimer();
Â  Â  Â  Â  Â  Â  if (participants.length === 0) return;

Â  Â  Â  Â  Â  Â  if (participants[currentParticipantIndex] && participants[currentParticipantIndex].status === 'active') {
Â  Â  Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'ready'; // Volta o anterior para pronto
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  currentParticipantIndex = (currentParticipantIndex - 1 + participants.length) % participants.length;
Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].status = 'active'; // Marca o novo como ativo
Â  Â  Â  Â  Â  Â  currentTime = participants[currentParticipantIndex].remainingTime;
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  startTimer(); // Inicia o timer automaticamente para o anterior
Â  Â  Â  Â  }

Â  Â  Â  Â  // Ajustar tempo
Â  Â  Â  Â  function adjustTime(seconds) {
Â  Â  Â  Â  Â  Â  if (participants.length === 0) return;
Â  Â  Â  Â  Â  Â  currentTime += seconds;
Â  Â  Â  Â  Â  Â  participants[currentParticipantIndex].remainingTime = currentTime;
Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  }

Â  Â  Â  Â  // Atualizar o display principal
Â  Â  Â  Â  function updateDisplay() {
Â  Â  Â  Â  Â  Â  const speakerElement = document.getElementById('currentSpeaker');
Â  Â  Â  Â  Â  Â  const timeElement = document.getElementById('currentTime');
Â  Â  Â  Â  Â  Â  const statusElement = document.getElementById('sessionStatus');

Â  Â  Â  Â  Â  Â  if (participants.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  const currentP = participants[currentParticipantIndex];
Â  Â  Â  Â  Â  Â  Â  Â  speakerElement.textContent = currentP.name;
Â  Â  Â  Â  Â  Â  Â  Â  const displayMinutes = Math.floor(Math.abs(currentTime) / 60);
Â  Â  Â  Â  Â  Â  Â  Â  const displaySeconds = Math.abs(currentTime) % 60;
Â  Â  Â  Â  Â  Â  Â  Â  const sign = currentTime < 0 ? '-' : '';
Â  Â  Â  Â  Â  Â  Â  Â  timeElement.textContent = `${sign}${String(displayMinutes).padStart(2, '0')}:${String(displaySeconds).padStart(2, '0')}`;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Atualiza a cor do tempo no display principal
Â  Â  Â  Â  Â  Â  Â  Â  timeElement.classList.remove('time-green', 'time-yellow', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  if (currentTime <= alertSettings.yellow && currentTime > alertSettings.red) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeElement.classList.add('time-yellow');
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTime <= alertSettings.red && currentTime >= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeElement.classList.add('time-red');
Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTime < 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeElement.classList.add('time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeElement.classList.add('time-green');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  statusElement.textContent = `Status: ${currentP.status === 'active' ? 'Ativo' : currentP.status === 'ready' ? 'Pronto' : 'Terminado'}`;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  speakerElement.textContent = 'Selecione um participante';
Â  Â  Â  Â  Â  Â  Â  Â  timeElement.textContent = '00:00';
Â  Â  Â  Â  Â  Â  Â  Â  timeElement.classList.remove('time-green', 'time-yellow', 'time-red', 'time-negative'); // Remove cores
Â  Â  Â  Â  Â  Â  Â  Â  statusElement.textContent = 'SessÃ£o nÃ£o iniciada';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Atualizar botÃµes de controlo
Â  Â  Â  Â  function updateControlButtons() {
Â  Â  Â  Â  Â  Â  const hasParticipants = participants.length > 0;
Â  Â  Â  Â  Â  Â  const isFirst = currentParticipantIndex === 0;
Â  Â  Â  Â  Â  Â  const isLast = currentParticipantIndex === participants.length - 1;

Â  Â  Â  Â  Â  Â  document.getElementById('startBtn').disabled = !hasParticipants || isRunning;
Â  Â  Â  Â  Â  Â  document.getElementById('pauseBtn').disabled = !hasParticipants || !isRunning;
Â  Â  Â  Â  Â  Â  document.getElementById('resetBtn').disabled = !hasParticipants;
Â  Â  Â  Â  Â  Â  document.getElementById('previousBtn').disabled = !hasParticipants || (currentMode === 'individual' && isRunning); // Desabilita em individual enquanto roda
Â  Â  Â  Â  Â  Â  document.getElementById('nextBtn').disabled = !hasParticipants || (currentMode === 'individual' && isRunning); // Desabilita em individual enquanto roda
Â  Â  Â  Â  Â  Â  document.getElementById('adjustMinus30Btn').disabled = !hasParticipants;
Â  Â  Â  Â  Â  Â  document.getElementById('adjustMinus10Btn').disabled = !hasParticipants;
Â  Â  Â  Â  Â  Â  document.getElementById('adjustPlus10Btn').disabled = !hasParticipants;
Â  Â  Â  Â  Â  Â  document.getElementById('adjustPlus30Btn').disabled = !hasParticipants;
Â  Â  Â  Â  }

Â  Â  Â  Â  // Mudar o modo (Individual/Debate)
Â  Â  Â  Â  function setMode(mode) {
Â  Â  Â  Â  Â  Â  currentMode = mode;
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
Â  Â  Â  Â  Â  Â  event.target.classList.add('active'); // Assume que o evento vem do clique no botÃ£o
Â  Â  Â  Â  Â  Â  updateDisplayWindow(); // Atualiza a janela de exibiÃ§Ã£o com o novo modo
Â  Â  Â  Â  Â  Â  updateControlButtons(); // Atualiza o estado dos botÃµes conforme o modo
Â  Â  Â  Â  }

Â  Â  Â  Â  // Abrir a janela de exibiÃ§Ã£o
Â  Â  Â  Â  function openDisplayWindow() {
Â  Â  Â  Â  Â  Â  if (displayWindow && !displayWindow.closed) {
Â  Â  Â  Â  Â  Â  Â  Â  displayWindow.focus();
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  displayWindow = window.open('', '_blank', 'width=800,height=600,resizable=yes');
Â  Â  Â  Â  Â  Â  if (!displayWindow) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Pop-ups bloqueados! Por favor, permita pop-ups para esta pÃ¡gina para abrir a janela de exibiÃ§Ã£o.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  displayWindow.document.write(`
Â  Â  Â  Â  Â  Â  Â  Â  <!DOCTYPE html>
Â  Â  Â  Â  Â  Â  Â  Â  <html lang="pt">
Â  Â  Â  Â  Â  Â  Â  Â  <head>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <meta charset="UTF-8">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <title>EcrÃ£ de ApresentaÃ§Ã£o</title>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <style>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background: #000;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #fff;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overflow: hidden; /* Prevent scrollbars */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transition: background-color 0.5s ease-in-out;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .display-container {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transform: scale(1.0); /* Adjust as needed */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transition: transform 0.3s ease-out;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displaySpeaker {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-size: 5rem; /* Larger font size */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transition: color 0.5s ease;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text-shadow: 0 0 20px rgba(255,255,255,0.2);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displayTime {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-size: 15rem; /* Massive font size */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-weight: 900;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-family: 'Courier New', monospace;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #48bb78; /* Default green */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text-shadow: 0 0 30px rgba(72,187,120,0.5);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transition: color 0.5s ease, text-shadow 0.5s ease;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .time-green { color: #48bb78; text-shadow: 0 0 30px rgba(72,187,120,0.5); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .time-yellow { color: #ed8936; text-shadow: 0 0 30px rgba(237,137,54,0.5); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .time-red { color: #f56565; text-shadow: 0 0 30px rgba(245,101,101,0.5); }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .time-negative { color: #f56565; text-shadow: 0 0 30px rgba(245,101,101,0.5); }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .background-yellow { background-color: #ed8936; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .background-red { background-color: #f56565; }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  /* Debate Mode Specific Styles */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-container {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  align-items: flex-start; /* Aligns items to the start of the cross axis */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  gap: 30px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  max-height: 100vh;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  overflow-y: auto; /* Enable scrolling for many participants */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-participant {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background: #1a1a1a;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border: 2px solid #333;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  width: 280px; /* Fixed width for better layout control */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-participant.active-speaker {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border-color: #667eea;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transform: scale(1.05);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 20px rgba(102,126,234,0.3);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-name {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-size: 1.8rem;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #ffffff;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  word-break: break-word; /* Prevents long names from overflowing */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-time {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-size: 4rem;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-family: 'Courier New', monospace;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #48bb78; /* Default green */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-participant-color-indicator {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  width: 40px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  height: 8px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  margin: 10px auto 0 auto;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displayMessage {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-size: 3rem;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #667eea;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.8);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px 40px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border: 2px solid #667eea;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: none; /* Hidden by default */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  /* Media Queries for Responsiveness */
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displaySpeaker { font-size: 3rem; margin-bottom: 15px; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displayTime { font-size: 8rem; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-name { font-size: 1.2rem; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-time { font-size: 3rem; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-participant { width: 180px; padding: 15px; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displayMessage { font-size: 2rem; padding: 15px 30px; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  @media (max-width: 480px) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displaySpeaker { font-size: 2rem; margin-bottom: 10px; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displayTime { font-size: 6rem; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-name { font-size: 1rem; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-time { font-size: 2rem; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .debate-participant { width: 140px; padding: 10px; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #displayMessage { font-size: 1.5rem; padding: 10px 20px; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </style>
Â  Â  Â  Â  Â  Â  Â  Â  </head>
Â  Â  Â  Â  Â  Â  Â  Â  <body>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="individualModeDisplay" class="display-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="displaySpeaker"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="displayTime"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="debateModeDisplay" class="debate-container" style="display: none;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="displayMessage" style="display: none;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </body>
Â  Â  Â  Â  Â  Â  Â  Â  </html>
Â  Â  Â  Â  Â  Â  `);
Â  Â  Â  Â  Â  Â  displayWindow.document.close();
Â  Â  Â  Â  Â  Â  updateDisplayWindow(); // Sincroniza o conteÃºdo inicial
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Limpar a mensagem no fechamento da janela de exibiÃ§Ã£o
Â  Â  Â  Â  Â  Â  displayWindow.onbeforeunload = () => {
Â  Â  Â  Â  Â  Â  Â  Â  currentMessage = "";
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }

Â  Â  Â  Â  // Atualizar a janela de exibiÃ§Ã£o
Â  Â  Â  Â  function updateDisplayWindow() {
Â  Â  Â  Â  Â  Â  if (displayWindow && !displayWindow.closed) {
Â  Â  Â  Â  Â  Â  Â  Â  const dDoc = displayWindow.document;
Â  Â  Â  Â  Â  Â  Â  Â  const individualDisplay = dDoc.getElementById('individualModeDisplay');
Â  Â  Â  Â  Â  Â  Â  Â  const debateDisplay = dDoc.getElementById('debateModeDisplay');
Â  Â  Â  Â  Â  Â  Â  Â  const displayMsgElement = dDoc.getElementById('displayMessage');

Â  Â  Â  Â  Â  Â  Â  Â  if (currentMessage) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMsgElement.textContent = currentMessage;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMsgElement.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  individualDisplay.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  debateDisplay.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dDoc.body.className = ''; // Limpa as classes de fundo
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return; // NÃ£o atualiza mais nada se houver mensagem
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  displayMsgElement.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  if (currentMode === 'individual') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  individualDisplay.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  debateDisplay.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dSpeaker = dDoc.getElementById('displaySpeaker');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dTime = dDoc.getElementById('displayTime');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (participants.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const currentP = participants[currentParticipantIndex];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dSpeaker.textContent = currentP.name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const displayMinutes = Math.floor(Math.abs(currentTime) / 60);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const displaySeconds = Math.abs(currentTime) % 60;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const sign = currentTime < 0 ? '-' : '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dTime.textContent = `${sign}${String(displayMinutes).padStart(2, '0')}:${String(displaySeconds).padStart(2, '0')}`;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Remove todas as classes de cor e fundo antes de adicionar as corretas
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dTime.classList.remove('time-green', 'time-yellow', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dDoc.body.className = '';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentTime <= alertSettings.yellow && currentTime > alertSettings.red) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'background' || alertSettings.type === 'both') dDoc.body.classList.add('background-yellow');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'text' || alertSettings.type === 'both') dTime.classList.add('time-yellow');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTime <= alertSettings.red && currentTime >= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'background' || alertSettings.type === 'both') dDoc.body.classList.add('background-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'text' || alertSettings.type === 'both') dTime.classList.add('time-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentTime < 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'background' || alertSettings.type === 'both') dDoc.body.classList.add('background-red');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (alertSettings.type === 'text' || alertSettings.type === 'both') dTime.classList.add('time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dTime.classList.add('time-green');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dSpeaker.textContent = 'Aguardando Participante';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dTime.textContent = '00:00';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dTime.classList.remove('time-yellow', 'time-red', 'time-negative');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dTime.classList.add('time-green');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dDoc.body.className = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } else { // Debate Mode
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  individualDisplay.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  debateDisplay.style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dDoc.body.className = ''; // Limpa classes de fundo do body principal

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  debateDisplay.innerHTML = participants.map((p, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pDisplayMinutes = Math.floor(Math.abs(p.remainingTime) / 60);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pDisplaySeconds = Math.abs(p.remainingTime) % 60;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pSign = p.remainingTime < 0 ? '-' : '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let timeClass = 'time-green';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (p.remainingTime <= alertSettings.yellow && p.remainingTime > alertSettings.red) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeClass = 'time-yellow';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (p.remainingTime <= alertSettings.red && p.remainingTime >= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeClass = 'time-red';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (p.remainingTime < 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timeClass = 'time-negative';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const activeClass = (index === currentParticipantIndex && isRunning && currentMode === 'debate') ? 'active-speaker' : '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="debate-participant ${activeClass}" style="border-color: ${p.color};">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="debate-name">${p.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="debate-time ${timeClass}">${pSign}${String(pDisplayMinutes).padStart(2, '0')}:${String(pDisplaySeconds).padStart(2, '0')}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="debate-participant-color-indicator" style="background-color: ${p.color};"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }).join('');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Enviar mensagem para o display ao pressionar Enter
Â  Â  Â  Â  document.getElementById('displayMessageInput').addEventListener('keydown', function(event) {
Â  Â  Â  Â  Â  Â  if (event.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  currentMessage = this.value;
Â  Â  Â  Â  Â  Â  Â  Â  updateDisplayWindow();
Â  Â  Â  Â  Â  Â  Â  Â  this.value = ''; // Limpa o input apÃ³s enviar
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // LÃ³gica para as configuraÃ§Ãµes de alerta
Â  Â  Â  Â  document.getElementById('yellowAlert').addEventListener('change', (e) => {
Â  Â  Â  Â  Â  Â  alertSettings.yellow = parseInt(e.target.value);
Â  Â  Â  Â  Â  Â  updateDisplay(); // Atualiza a cor do display principal se estiver dentro dos limites
Â  Â  Â  Â  Â  Â  updateDisplayWindow(); // Atualiza a janela de exibiÃ§Ã£o
Â  Â  Â  Â  });
Â  Â  Â  Â  document.getElementById('redAlert').addEventListener('change', (e) => {
Â  Â  Â  Â  Â  Â  alertSettings.red = parseInt(e.target.value);
Â  Â  Â  Â  Â  Â  updateDisplay(); // Atualiza a cor do display principal se estiver dentro dos limites
Â  Â  Â  Â  Â  Â  updateDisplayWindow(); // Atualiza a janela de exibiÃ§Ã£o
Â  Â  Â  Â  });
Â  Â  Â  Â  document.getElementById('alertType').addEventListener('change', (e) => {
Â  Â  Â  Â  Â  Â  alertSettings.type = e.target.value;
Â  Â  Â  Â  Â  Â  updateDisplayWindow(); // Atualiza a janela de exibiÃ§Ã£o para aplicar o novo tipo de alerta
Â  Â  Â  Â  });

Â  Â  Â  Â  // InicializaÃ§Ã£o
Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  loadSessions();
Â  Â  Â  Â  Â  Â  updateParticipantsList();
Â  Â  Â  Â  Â  Â  updateDisplay();
Â  Â  Â  Â  Â  Â  updateControlButtons();
Â  Â  Â  Â  Â  Â  updateAlertSettingsDisplay(); // Garante que os inputs de alerta sÃ£o preenchidos na inicializaÃ§Ã£o
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
